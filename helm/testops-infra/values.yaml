# Default values for testops-infra

global:
  namespace: testops

  # Global image settings
  image:
    pullPolicy: Always
    registry: docker.io

  # PostgreSQL Database
  postgres:
    enabled: true
    name: postgres
    image:
      repository: postgres
      tag: "13"
    service:
      type: ClusterIP
      port: 5432
    persistence:
      enabled: true
      size: 2Gi
      storageClass: "standard"
    config:
      database: canvas_db
    credentials:
      username: canvas_user
      password: canvas_password
    resources:
      requests:
        memory: "512Mi"
        cpu: "500m"
      limits:
        memory: "1Gi"
        cpu: "1000m"

  # Kafka
  kafka:
    enabled: true
    name: kafka
    image:
      repository: apache/kafka
      tag: "3.9.0"
    service:
      type: ClusterIP
      port: 9092
    persistence:
      enabled: true
      size: 3Gi
      storageClass: "standard"
    config:
      brokerId: 1
      replicationFactor: 1
    resources:
      requests:
        memory: "256Mi"
        cpu: "200m"
      limits:
        memory: "512Mi"
        cpu: "400m"

  # Django settings (for configmap)
  django:
    secretKey: "django-insecure-change-this-in-production-k8s-secret-key-12345"

  # Django App reference (for configmap/secrets)
  djangoApp:
    name: testops-publisher

  # Security
  rbac:
    enabled: true

  # Secrets
  secrets:
    geminiApiKey: "YOUR_GEMINI_API_KEY_HERE"
    googleOauth2Key: ""
    googleOauth2Secret: ""
    grafanaCloudApiKey: ""

  # Monitoring
  monitoring:
    prometheus:
      enabled: true
      image:
        repository: prom/prometheus
        tag: "v2.48.0"
      resources:
        requests:
          memory: "128Mi"
          cpu: "100m"
        limits:
          memory: "256Mi"
          cpu: "200m"
    grafana:
      username: "2849703"
      prometheusUrl: https://prometheus-prod-43-prod-ap-south-1.grafana.net/api/prom/push

  # Kafka UI for monitoring and management
  kafkaUi:
    enabled: true

  # Ingress (needed for configmap)
  ingress:
    hosts:
      - host: testops.thduc.tech

# Subchart conditions
postgres:
  enabled: true

kafka:
  enabled: true

prometheus:
  enabled: true
